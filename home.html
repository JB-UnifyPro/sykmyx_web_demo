<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SykMyx</title>
  <meta name="theme-color" content="#191a23">
  <link rel="manifest" href="/manifest.webmanifest">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <style>
    :root {
      --bg-dark: #191a23;
      --card-dark: #23243a;
      --text-dark: #f0f1f7;
      --muted-dark: #8d94a7;
      --accent-dark: #8b5cf6;
      --accent2-dark: #06b6d4;
      --bg-light: #f7f8fa;
      --card-light: #e5e7eb;
      --text-light: #23243a;
      --muted-light: #8d94a7;
      --accent-light: #8b5cf6;
      --accent2-light: #06b6d4;
      --radius: 18px;
      --shadow: 0 12px 32px rgba(30,40,60,.18);
      --transition: 0.3s cubic-bezier(.4,0,.2,1);
      --logo-size: 44px;
    }
    html, body { height: 100%; margin: 0; }
    body {
      min-height: 100vh;
      font-family: 'Inter', 'Segoe UI', system-ui, Arial, sans-serif;
      font-size: 17px;
      background: var(--bg-dark);
      color: var(--text-dark);
      transition: background var(--transition), color var(--transition);
    }
    body.light {
      background: var(--bg-light);
      color: var(--text-light);
    }
    header {
      position: sticky; top: 0; z-index: 10;
      background: rgba(30,36,58,.6);
      border-bottom: 1px solid rgba(255,255,255,.05);
      backdrop-filter: blur(8px) saturate(120%);
    }
    body.light header {
      background: rgba(229,231,235,.8);
      border-bottom: 1px solid #e5e7eb;
    }
    .container {
      max-width: 960px; margin: 0 auto; padding: 20px 16px;
    }
    .brand-row {
      display: flex; align-items: center; gap: 16px;
    }
    .sykmyx-logo {
      width: var(--logo-size); height: var(--logo-size);
      border-radius: 10px;
      background: linear-gradient(135deg, var(--accent-dark), var(--accent2-dark));
      display: flex; align-items: center; justify-content: center;
      font-weight: bold; font-size: 1.5rem; color: #fff;
      box-shadow: 0 2px 10px rgba(20,20,40,0.18);
      letter-spacing: 2px;
      transition: background var(--transition);
    }
    body.light .sykmyx-logo {
      background: linear-gradient(135deg, var(--accent-light), var(--accent2-light));
      color: #23243a;
    }
    h1 {
      font-weight: 900;
      font-size: 2.2rem;
      margin: 0 0 0 6px;
      letter-spacing: 1px;
    }
    .theme-toggle {
      margin-left: auto;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 15px;
      color: var(--muted-dark);
    }
    body.light .theme-toggle { color: var(--muted-light); }
    select, button, input {
      border-radius: 10px;
      border: 1px solid rgba(130,130,150,0.12);
      background: var(--card-dark);
      color: var(--text-dark);
      padding: 10px 14px;
      font-size: 16px;
      transition: background var(--transition), color var(--transition);
    }
    body.light select, body.light button, body.light input {
      background: var(--card-light);
      color: var(--text-light);
      border: 1px solid #d1d5db;
    }
    .hero {
      background: linear-gradient(95deg, var(--accent-dark) 0%, var(--accent2-dark) 100%);
      border-radius: var(--radius);
      color: #fff;
      padding: 24px 20px;
      margin-top: 18px;
      box-shadow: var(--shadow);
      display: flex; flex-direction: column; gap: 8px;
    }
    body.light .hero {
      background: linear-gradient(95deg, var(--accent-light) 0%, var(--accent2-light) 100%);
      color: #23243a;
    }
    .hero strong { font-size: 1.25rem; letter-spacing: 1px; }
    .hero .tip { font-size: 15px; color: rgba(255,255,255,0.82); margin-top: 8px; }
    body.light .hero .tip { color: #23243a; }
    nav.tabs {
      display: flex; gap: 10px; margin: 26px 0 20px 0; flex-wrap: wrap;
      background: transparent;
    }
    nav.tabs button {
      background: var(--card-dark);
      color: var(--muted-dark);
      border: none;
      border-radius: 999px;
      padding: 11px 18px;
      font-weight: 600;
      font-size: 15px;
      cursor: pointer;
      transition: background var(--transition), color var(--transition);
    }
    nav.tabs button.active {
      background: linear-gradient(90deg, var(--accent-dark), var(--accent2-dark));
      color: #fff;
      font-weight: 700;
      box-shadow: 0 2px 8px rgba(140,90,246,0.12);
    }
    body.light nav.tabs button {
      background: var(--card-light);
      color: var(--muted-light);
    }
    body.light nav.tabs button.active {
      background: linear-gradient(90deg, var(--accent-light), var(--accent2-light));
      color: #23243a;
    }
    .card {
      background: var(--card-dark);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 20px;
      margin-bottom: 20px;
      border: 1px solid rgba(130,130,150,0.12);
      transition: background var(--transition), color var(--transition);
    }
    body.light .card {
      background: var(--card-light);
      color: var(--text-light);
      border: 1px solid #e5e7eb;
    }
    .notice { font-size: 14px; color: var(--muted-dark); }
    body.light .notice { color: var(--muted-light); }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 18px;
      margin-top: 10px;
    }
    footer {
      color: var(--muted-dark); font-size: 13px;
      padding: 36px 16px; text-align: center;
      margin-top: 48px;
      border-top: 1px solid rgba(80,90,110,0.13);
    }
    body.light footer { color: var(--muted-light); border-top: 1px solid #e5e7eb; }
    @media (max-width: 640px) {
      .container { padding: 12px 6px; }
      h1 { font-size: 1.4rem; }
      .sykmyx-logo { width: 34px; height: 34px; font-size: 1rem; }
      .hero { padding: 16px 10px; }
      .card { padding: 12px; }
      nav.tabs button { padding: 8px 12px; font-size: 13px; }
    }
  </style>
</head>
<body>
<header>
  <div class="container brand-row">
    <div class="sykmyx-logo">SX</div>
    <h1>SykMyx</h1>
    <div class="theme-toggle">
      <label for="themeSelect">Theme</label>
      <select id="themeSelect">
        <option value="dark">Dark</option>
        <option value="light">Light</option>
        <option value="auto">Auto</option>
      </select>
    </div>
  </div>
  <div class="container">
    <div class="hero">
      <strong>Unified music search & identity</strong>
      <span class="tip">Stunning, neutral SykMyx experience. Add to Home Screen for app-like feel.</span>
    </div>
  </div>
</header>
<main>
  <div class="container">
    <nav class="tabs">
      <button class="active" data-tab="search">Search</button>
      <button data-tab="identify">Identify</button>
      <button data-tab="versions">Versions</button>
      <button data-tab="settings">Settings</button>
      <button data-tab="compliance">Compliance</button>
    </nav>
    <section id="search" class="tab">
      <div class="card">
        <h3>Search for music</h3>
        <div style="display:flex; gap:12px; align-items:center;">
          <input id="q" placeholder="Try: Song X" style="flex:1" />
          <select id="platform">
            <option>Apple Music</option>
            <option>Spotify</option>
            <option>YouTube Music</option>
            <option>Amazon Music</option>
            <option>Tidal</option>
            <option>SoundCloud</option>
          </select>
          <button onclick="doSearch()">Search</button>
        </div>
        <p class="notice">Demo: Buttons simulate “Open on {platform}”. Platform logos and colors are hidden for neutrality.</p>
      </div>
      <div id="results" class="grid"></div>
    </section>
    <section id="identify" class="tab" style="display:none">
      <div class="card">
        <h3>Identify a track</h3>
        <div class="notice">ACR ON for Apple/Shazam & Standalone only. Other platforms disabled.</div>
        <div style="text-align:center; padding:16px 0;">
          <div id="pulse" style="display:none; margin: auto; width: 100px; height: 100px; border-radius: 50%; background: linear-gradient(135deg, var(--accent-dark), var(--accent2-dark)); box-shadow: 0 0 0 0 rgba(140,90,246,.25);"></div>
          <div id="match" style="margin-top:12px"></div>
          <div style="display:flex; justify-content:center; gap:8px; margin-top:10px;">
            <select id="identifyMode"><option>AppleShazam</option><option>Standalone</option><option disabled>Other (locked)</option></select>
            <button onclick="runIdentify()">Identify (demo)</button>
          </div>
        </div>
        <div class="notice">Clarity Lock: SykMyx routes, platforms host playback.</div>
      </div>
    </section>
    <section id="versions" class="tab" style="display:none">
      <div class="card">
        <h3>Versions (Swipe to browse)</h3>
        <div id="versionCards" class="grid">
          <!-- Swipeable cards will go here in next step -->
          <div class="notice">Search to populate versions. Swipe feature coming next!</div>
        </div>
      </div>
    </section>
    <section id="settings" class="tab" style="display:none">
      <div class="card">
        <h3>Settings</h3>
        <ul class="notice">
          <li>Identify exposure: Apple/Shazam & Standalone only</li>
          <li>Legacy resolver reroutes supported</li>
          <li>Analytics: view events only (no PII)</li>
        </ul>
      </div>
    </section>
    <section id="compliance" class="tab" style="display:none">
      <div class="card">
        <h3>Compliance & Notes</h3>
        <ul class="notice">
          <li>No media download or unauthorized playback.</li>
          <li>“Open on {platform}” is a simulated, compliant handoff.</li>
        </ul>
      </div>
    </section>
  </div>
</main>
<footer>
  SykMyx • Modern Demo UI • v1.1
</footer>
<script>
  // Theme switching logic
  const themeSelect = document.getElementById('themeSelect');
  function setTheme(mode) {
    if(mode === 'auto') {
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      document.body.className = prefersDark ? 'dark' : 'light';
    } else {
      document.body.className = mode;
    }
    localStorage.setItem('sykmyx_theme', mode);
  }
  themeSelect.addEventListener('change', e => setTheme(e.target.value));
  (function() {
    const saved = localStorage.getItem('sykmyx_theme') || 'dark';
    themeSelect.value = saved;
    setTheme(saved);
    if(saved === 'auto') {
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => setTheme('auto'));
    }
  })();
  document.querySelectorAll('nav.tabs button').forEach(b => b.onclick = () => {
    document.querySelectorAll('nav.tabs button').forEach(x => x.classList.remove('active'));
    b.classList.add('active');
    const id = b.dataset.tab;
    document.querySelectorAll('.tab').forEach(s => s.style.display = (s.id === id ? 'block' : 'none'));
  });
  function doSearch() {
    const q = (document.getElementById('q').value || 'Song X').trim();
    const wrap = document.getElementById('results');
    wrap.innerHTML = '<div class="notice">Searching…</div>';
    const cb = 'syk_cb_' + Date.now();
    const url = 'https://itunes.apple.com/search?media=music&entity=song&limit=12&term=' + encodeURIComponent(q) + '&callback=' + cb;
    window[cb] = function(data){
      wrap.innerHTML = '';
      (data.results || []).forEach(item => {
        const title = `${item.trackName} — ${item.artistName}`;
        const art   = (item.artworkUrl100||'').replace('100x100','200x200');
        const prev  = item.previewUrl||'';
        const openApple  = item.trackViewUrl || '';
        const openArtist = item.artistViewUrl || '';
        const openSpotify= 'https://open.spotify.com/search/'+encodeURIComponent(title);
        const openYTM    = 'https://music.youtube.com/search?q='+encodeURIComponent(title);
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <div style="display:flex; gap:12px; align-items:flex-start;">
            ${art ? `<img src="${art}" width="64" height="64" style="border-radius:12px">` : ''}
            <div style="flex:1">
              <h3>${title}</h3>
              <div class="notice">${item.collectionName||''}</div>
              <div style="display:flex; gap:8px; margin-top:8px; flex-wrap:wrap;">
                ${openApple ? `<button onclick="window.open('${openApple}','_blank')">Apple Track</button>`:''}
                ${openArtist ? `<button onclick="window.open('${openArtist}','_blank')">Apple Artist</button>`:''}
                <button onclick="window.open('${openSpotify}','_blank')">Spotify</button>
                <button onclick="window.open('${openYTM}','_blank')">YouTube Music</button>
                ${prev ? `<a href="${prev}" target="_blank" rel="noopener" style="display:inline-block;padding:10px 12px;border-radius:10px;border:1px solid rgba(130,130,150,0.09);background:var(--card-dark);color:inherit;text-decoration:none">Preview 30s</a>`:''}
              </div>
            </div>
          </div>`;
        wrap.appendChild(card);
      });
      if(!wrap.children.length){ wrap.innerHTML='<div class="notice">No results — try another term.</div>'; }
      cleanup();
    };
    const s = document.createElement('script');
    s.id = cb; s.src = url;
    s.onerror = function(){ wrap.innerHTML='<div class="notice">Search failed. Try again.'; cleanup(); };
    document.body.appendChild(s);
    function cleanup(){ try{ delete window[cb]; }catch{} const el=document.getElementById(cb); if(el) el.remove(); }
  }
  function runIdentify() {
    const m = document.getElementById('identifyMode').value;
    if(m!=='AppleShazam' && m!=='Standalone'){ alert('Identify is locked OFF for this surface.'); return; }
    const pulse = document.getElementById('pulse'), match = document.getElementById('match');
    match.textContent = ''; pulse.style.display = 'block';
    setTimeout(() => { pulse.style.display = 'none'; match.innerHTML="<div style='font-weight:600;color:var(--accent-dark);margin-bottom:6px;'>Match found!</div><div>Song X — Artist Y</div><div class='notice'>Confidence 93%</div>"; }, 1600);
  }
</script>
</body>
</html>